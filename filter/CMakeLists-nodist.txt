set (sources
        filter_utils.c filter_io.cpp filter_memalloc.c
        utils_ffs.c
)

link_directories (${CADO_NFS_BINARY_DIR}/ffs/f2)
link_directories (${CADO_NFS_BINARY_DIR}/ffs/f3)
include_directories (${CADO_NFS_SOURCE_DIR}/ffs)
#link_directories (${CADO_NFS_BINARY_DIR}/gf2x/.libs)

add_executable(sm sm.c)
target_link_libraries(sm filterutils)

add_library (ffs-f2 EXCLUDE_FROM_ALL ${sources})
target_link_libraries(ffs-f2 utils pthread m libfppol-f2.a)
#target_link_libraries(ffs-f2 utils pthread m libfppol-f2.a gf2x)
set_target_properties(ffs-f2 PROPERTIES COMPILE_FLAGS "-DFOR_FFS -DUSE_F2")
add_dependencies(ffs-f2 antebuffer)
#add_dependencies(ffs-f2 gf2x-build)

add_library (ffs-f3 EXCLUDE_FROM_ALL ${sources})
target_link_libraries(ffs-f3 utils pthread m libfppol-f3.a)
set_target_properties(ffs-f3 PROPERTIES COMPILE_FLAGS "-DFOR_FFS -DUSE_F3")
add_dependencies(ffs-f3 antebuffer)

add_executable(dup2-ffs-f2 EXCLUDE_FROM_ALL dup2.c)
target_link_libraries(dup2-ffs-f2 ffs-f2)
set_target_properties(dup2-ffs-f2 PROPERTIES COMPILE_FLAGS "-DFOR_FFS -DUSE_F2")

add_executable(dup2-ffs-f3 EXCLUDE_FROM_ALL dup2.c)
target_link_libraries(dup2-ffs-f3 ffs-f3)
set_target_properties(dup2-ffs-f3 PROPERTIES COMPILE_FLAGS "-DFOR_FFS -DUSE_F3")

add_executable(explain explain.c)
target_link_libraries(explain utils)

add_executable(reconstructlog-ffs-f2 EXCLUDE_FROM_ALL reconstructlog.c)
target_link_libraries(reconstructlog-ffs-f2 ffs-f2)
set_target_properties(reconstructlog-ffs-f2 PROPERTIES COMPILE_FLAGS "-DFOR_FFS -DUSE_F2")
add_executable(reconstructlog-ffs-f3 EXCLUDE_FROM_ALL reconstructlog.c)
target_link_libraries(reconstructlog-ffs-f3 ffs-f3)
set_target_properties(reconstructlog-ffs-f3 PROPERTIES COMPILE_FLAGS "-DFOR_FFS -DUSE_F3")
# vim: ft=cmake:
